# 예외

## 69. 예외는 진짜 예외 상황에만 사용하라&#x20;

예외는 진짜 예외 상황에서만 써야하지 일상 적인 제어 흐름용으로 사용하면 안된다.&#x20;



## 70. 복구할 수 있는 상황에는 검사 예외를, 프로그래밍 오류에는 런타입 예외를 사용하라&#x20;

**검사 예외 : 호출하는 쪽에서 복구하리라 여겨지는 상황일 때 설계해서 API 사용자에게 그 오류에 대해 복구하길 기대한다. 이 때 복구에 필요한 정보도 알려주자**&#x20;

비검사 에러는 아래 두가지로 보통 잡을 필요가 없거나 안잡는 것이 좋다.

**런타임 예외: 프로그래밍 오류를 나타낼 때**&#x20;

**에러**: JVM, 자원 부족 , 불변식 깨짐 등 더 이상 수행할 수 없을 때 사용한다. 구현할 땐 이 클래스를 상속받지 말자&#x20;





## 71. 필요 없는 검사 예외 사용은 피하라&#x20;

* 검사 예외는 발생한 문제를 프로그래머가 처리하게 유도하여 안정성을 높이게 해준다
* 하지만 너무 과하게 사용되면 오히려 쓰기 불편한 API가 된다.&#x20;
* API를 제대로 사용해도 발생할 수 있는 예외이거나, 프로그래머가 의미 있는 조치를 취할 수 있다면 검사 예외가 좋지만 그렇지 않다면 비검사 예외를 사용하는게 좋다.
* stream문 안에서도 사용하지 못함
* 검사 예외가 필요하다면 일단 빈 Optional를 사용해보자. 예외에 대한 정보가 부족하면 검사 예외를 사용해도 늦지 않다.&#x20;



## 72. 표준 예외를 사용하라

* 표준으로 정의된 예외를 최대한 활용하자&#x20;
* 다른 사람들도 모두 낯익기 때문에 읽기 쉽다
* Exception, RuntimeException, Trhowable, Error는 직접 사용하지 말고 추상 클래스라고 생각하자.&#x20;

## 73.추상화 수준에 맞는 예외를 던지라

* 저수준 메서드에서 예외를 처리하지 않고 바깥으로 전파한다면, 상위 계층에서는 저수준 예외를 잡아 자신의 추상화 수준에 맞는 예외를 번역해 사용하자.&#x20;
* 상위 계층에는 맥락에 어울리는 고수준 예외를 던지면서 근본 원인도 알려주기 때문에 분석하기 더 쉽다.

## 74. 메서드가 던지는 모든 예외를 문서화하라&#x20;

* 메서드가 던지는 예외는 그 메서드를 올바로 사용하는 데 아주 중요한 정보이다.&#x20;
* 따라서 각 메서드가 던지는 예외 하나하나를 문서화하는 데 충분한 시간을 쏟아야 한다.
* 각 예외가 발생하는 상황을 자바독의 @throws 태그를 사용하여 정확히 문서화하자.&#x20;
* 메서드가 던질 수 있는 예외를 각각 @trhows 태그로 문서화하되, 비검사 예외는 메서드 선언의 trhows 목록에 넣지 말자. 자바독이 시각적으로 구분해줘 비검사 예외인지 알 수 있다.&#x20;

## 75. 예외의 상세 메시지에 실패 관련 정보를 담으라&#x20;

* 에러 분석을 위해 실패 원인에 관한 정보를 가능한 많이 담아 반환하는게 중요하다&#x20;
* 실패 순간을 포착하려면 발생한 예외에 관여된 모든 매개변수와 필드의 값을 실패 메시지에 담아야 한다.&#x20;
* 물룬 최종 사용자에게는 친절한 메시지를 보여줘야하고 보안에 민감한 것도 담으면 안된다.

## 76.가능한 한 실패 원자적으로 만들라&#x20;

* 호출된 메서드가 실패하더라도 해당 객체는 메서드 호출 전 상태를 유지하는 것이 좋다. 이런 특성을 실패 원자적이라고 한다.&#x20;
* 가장 간단한 방법은 불변 객체로 설계하는 것이다. 불변 객체는 실패하든 말든 기존 객체가 불안정한 상태에 빠질일은 없다.&#x20;
* 가변 객체의 메서드를 실패 원자적으로 만드는 흔한 방법은 작업 수행전 매개변수의 유효성을 검사하는 것이다.&#x20;
* 이와 비슷한 취지로 실패 가능성이 있는 모든 코드를, 객체의 상태를 바꾸는 코드보다 앞에 배치하는 방법도 있다.&#x20;



## 77. 예외를 무시하지 말라&#x20;

* API 설계자가 메서드 선언에 예외를 명시하는 까닭은, 그 메서드를 사용할 때 적절한 조치를 취해달라는 것이다.&#x20;
* try catch를 통해 예외를 무시하기 매우 쉽다.&#x20;
* 무시하지 않고 바깥으로 전파되게만 나눠도 최소한 디버깅 정보를 남길 것이다.&#x20;

