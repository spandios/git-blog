# 도메인 영역의 주요 구성요소

## 도메인 모델의 엔티티와 DB 테이블의 엔티티의 차이점&#x20;

1. 도메인 모델은 단순히 데이터만 저장하고 보여주는 것이 아니라 실제로 관련된 도메인 기능을 함께 제공한다.
2. 도메인 모델은 Value 타입을 사용할 수 있다.&#x20;

Order는 Orderer라는 밸류 타입의 객체를 통해 주문자에 대한 개념을 온전히 표현할 수 있다.

```java
class Order{
	Orderer orderer;
  	// ~~
}

class Orderer{
	private String name;
	private String email;
	// ~
}
```



## Aggregate

도메이 커지면 커질수록 도메인 모델 또한 커지며, 많은 엔티티와 밸류를 사용하게 된다.&#x20;

많은 엔티티와 밸류를 관리하느라 이 부분만 집중하게 되면 큰 그림보다는 개별 요소에만 집중하게 되어, 전체 모델의 관계를 이해하지 못해 근시안적인 설계를 할 가능성이 크다. &#x20;

**애그리게이트**는 이런 문제를 해결하기 위한 개념으로, 관련된 객체를 **하나로 묶어 상위 개념**으로 정의한다.&#x20;

엔티티나 밸류처럼 개별 요소가 아닌 애그리게이트 간의 관계로 표현하고 생각할 수 있게 도와준다.&#x20;

덕분에 큰 범위에서 도메인 모델을 이해할 수 있기 때문에, 전체적인 흐름을 파악하면서 도메인 모델을 관리할 수 있다.&#x20;

<figure><img src="../../../.gitbook/assets/스크린샷 2023-02-08 오후 3.14.09.png" alt=""><figcaption></figcaption></figure>

애그리거트에는 루트 엔티티가 존재하며, 루트 엔티티가 엔티티와 밸류 객체를 이용해 구현 기능을 제공한다.

위의 예시는 루트 엔티티인 Order라는 것을 알 수 있다. Order가 각 엔티티나 밸류를 이용해 기능을 제공한다.



## Repository

위의 엔티티나 밸류는 요구사항에서 도출되는 도메인 모델이라면 리포지터리는 구현을 위한 도메인 모델이다.&#x20;

리포지터리는 애거리거트 단위로 도메인 객체를 저장하고 조회하는 기능을 정의한다.

<figure><img src="../../../.gitbook/assets/스크린샷 2023-02-08 오후 3.23.24.png" alt=""><figcaption></figcaption></figure>

OrderRepository Interface는 도메인 객체를 영속화하는데 필요한 기능을 추상화한 것으로 고수준 모듈에 속한다.&#x20;

실제 기능 구현한 클래스는 Infra계층에 속한다.&#x20;

