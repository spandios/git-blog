# 응용 영역과 표현영역

## 표현 영역&#x20;

* 클라이언트가 기능을 사용할 수 있도록 요청이나 응답을 흐름을 제어 해준다.
* 가장 앞 단에서 클라이언트의 요청을 해석하고 응용 서비스에게 전달한다.
* 응용 서비스를 이용해 기능을 제공한다.&#x20;
* 사용자의 요청이 올바른지 검증을 처리한다.
* 인증, 권한 검증을 처리한다.

{% hint style="info" %}
조회 전용&#x20;

반드시 응용 서비스를 이용해서 기능을 제공하는 것은 아니다.&#x20;

만약 어떤 조회 기능은 추가 로직이 필요 없을뿐더러 트랜잭션도 필요하지 않다면 굳이 서비스에서 제공 안 해도 된다.
{% endhint %}



## 응용 영역&#x20;

* 응용 서비스는 전달 받은 요청을 처리하기 위해 기능을 실행하고, 그 결과를 리턴한다.&#x20;
* 응용 서비스는 표현 영역에 의존하지 않는다. 웹 브라우저, REST API 등의 표현 영역에서 사용되는 기술은 응용 서비스는 관심 없다. 응용 서비스는 단지 인풋을 받고 어떻게 기능을 실행하고 리턴하는 것에 관심이 있다.

### 응용 서비스의 역할&#x20;

응용 서비스의 주역할은 클라이언트가 요청한 요구사항을 위해 기능을 수행하는 것이며, 그러기 위해 도메인 객체를 사용한다. 주로 도메인 객체 간의 흐름을 제어 하면서 기능을 수행하기 때문에 단순한 형태를 갖는다.

```java
Result doSomething(SomeRequest req){
    // 애그리거트 조회    
    Domain domain = repository.findById(req.id)
    
    // 도메인 기능 수행 
    Result result domain.doSomething()
    
    // 결과 리턴
    return result
}
```

만약 서비스 코드가 복잡하다면 응용 서비스가 도메인 로직의 일부를 구현하고 있는지 의심해보자.

응용 서비스가 책임을 넘어 도메인 로직의 일부를 구현한다는 것은 코드 중복, 로직 분산, 결합도 상승 등 좋지 않은 결과를 일으킨다.



### 도메인 로직 넣지 않기

도메인 로직을 응용 서비스에서 구현 하면 다음과 같은 문제가 발생한다.

1. 코드 응집성이 떨어진다&#x20;

도메인 데이터와 그 데이터를 조작하는 도메인 로직이 한 곳에 있지 않고 관심사가 다른 곳에 있다는 것은 코드 응집성을 낮추며 때문에 가독성을 해치고 코드 수정을 어렵게 한다.

2. 코드가 중복이 될 가능성이 높다.

한 응용 서비스에서 도메인 로직을 구현한 뒤, 다른 응용 서비스에서 또 같은 도메인 로직 기능이 필요하면 재사용하는 것이 아닌 똑같은 코드를 또 작성해야 한다.&#x20;



위의 두 문제는 코드 수정을 어렵게 한다는 공통점이 있다. 따라서 미리 두 로직이 어디에 위치해야할지 고려하고 구현하도록 하자.



### 응용 서비스에서 인터페이스와 클래스

응용 서비스를 만들 때 반드시 인터페이스를 만들고 구현할 필요 없다.&#x20;

런타임에 교체하는 경우나 한 서비스 구현체가 2개 이상인 경우도 드물기 때문이다.&#x20;

따라서 인터페이스가 필요하다고 명확하게 판단을 내리는게 아니라 관습처럼 인터페이스를 작성하는 것은 오히려 코드만 많아지고 복잡해질 뿐 장점이 없다.



