---
description: MSA에 대해 알아보자
---

# MSA

수년간 웹 애플리케이션에서 가장 많은 관심을 받은 키워드는 MSA일 것이다. MSA는 현재도 지속적으로 아마존, 넷플릭스 등의 빅테크 기업들이 선도하고 있으며 아직도 많은 관심을 받고 있다. 이번 글은 MSA가 무엇인지에 대해 알아보려고 한다.&#x20;

먼저 MSA와 반대의 개념이지만 익숙한 모놀로식 아키텍처를 알아보고 MSA와 비교해보자.

## Monolotic

하나의 시스템이 서비스 전체 기능을 처리하도록 설계하는 것으로 과거부터 지금까지 많이 사용되는 아키텍처이다. 모놀로틱은 한 애플리케이션에서 다양한 비지니스 로직을 처리하며, 하나의 데이터 저장소를 사용한다.&#x20;

<img src="../.gitbook/assets/file.excalidraw.svg" alt="" class="gitbook-drawing">



### 장점

1. **구조가 비교적 간단**하다. 한 애플리케이션이 한 데이터 저장소를 바라보며 모든 서비스 처리가 이곳에서 발생된다. 때문에 디버깅이나 로깅도 간단하다.&#x20;
2. **RDB의 Transaction** 기능을 쉽게 온전히 사용할 수 있다. 데이터 저장소가 하나이기 때문이다. **유닛, 통합 테스트**를 작성하기 쉽다.&#x20;

&#x20;\= 모놀로식 아키텍처는 간단한 구조이기 때문에 비교적 빠르고 쉽게 개발하고 운영할 수 있다.&#x20;

### 단점&#x20;

1. 서비스 기능이 많아질수록 애플리케이션이 **복잡해진다.**
2. 서비스가 커질수록 **빌드, 배포시간이 늘어난다**. 한 서비스만 수정 하더라도 애플리케이션 전체를 다시 빌드하고 배포해야하기 때문이다.&#x20;
3. **스케일 아웃의 한계**가 있다. 어떤 한 서비스만 성능이 더 필요해도 전체 애플리케이션 단의 성능을 높여야한다.&#x20;

\= 서비스가 규모가 커지면 확장에 한계가 있고 비효율적이다.&#x20;



### 모놀로식 아키텍처를 전환해야하는 상황

아래의 상황 처럼 모놀로식 기반의 애플리케이션의 서비스가 점점 고도화되고 고객이 많아지면, 코드 품질과 성능을 높이려 노력을 해도 한계에 도달하는 수준이 있다. 이 때쯤이면 아키텍처 전향을 고려해야 한다.&#x20;

* 로드밸런서 효과가 한계가 있을 때
* 데이터베이스의 스케일 업에 한계가 있을 때&#x20;
* 시스템이 너무 복잡해 기능 추가가 어려울 때
* 개발자는 늘었는데, 개발 속도는 오히려 늦어지거나 같을 때
* 수정 작업이 사이드 이펙트가 심할 때



## MSA&#x20;

MSA는 모놀로식과는 다르게 서비스를 각각 분리해 그것을 담당하는 애플리케이션을 두며, 서비스마다 독립적인 DB를 사용한다. 서비스들은 미리 정의된 인터페이스를 통해 서로 유기적으로 동작하며 전체 기능을 수행한다.

MSA는 서비스 간의 통신은 정해진 API를 통해 느슨한 결합을 가질 수 있다. API 통신의 성능이 전반적인 애플리케이션 성능에 영향을 미치므로 가벼운 프로토콜을 사용해야 한다.

### SOA

MSA는 서비스 지향 아키텍처(SOA)와 공통점이 많다. 서비스 지향 아키텍처도 서비스 기능 단위로 시스템을 만들고, 각 시스템끼리 인터페이스를 통해 서비스를 통합하는 아키텍처이기 때문이다.&#x20;

하지만 SOA는 개념적으로는 이상적이였지만 실제 현업에서 구체화는 실패했다. 왜냐하면 당시에는 클라우드 기술이 부족했다. 클라우드 기술 없이 빠르고 효율적으로 여러 서비스를 배포하고 운영하는 것은 현실적으로 힘들었을 것이다.

또, SOA는 MSA와 달리 데이터 저장소를 독립적으로 두지 않았다. 따라서 데이터의 강한 결합으로 애플리케이션이 독립성을 가졌다고 보기 힘들었다.&#x20;

하지만 MSA는 데이터베이스를 독립적으로 두고 서비스 간의 통신은 정해진 API를 이용한다. 그 결과 직접적으로 다른 서비스의 데이터베이스에 접근하지 않도록 해서 서비스의 독립성과 캡슐화를 높여 진정한 모듈화를 얻을 수 있게 했다.

{% hint style="info" %}
모듈화 개념의 발전 흐름

1. 구조적(structed): 기능을 하향식 분해하는 설계&#x20;
2. 객체지향(oop): 객체 단위로 모듈화
3. CBD: 모듈화의 단위가 기능별로 재사용할 수 있는 더 큰 Component를 기반으로 개발
4. SOA: 컴퍼넌트를 모아 비지니스적으로 의미 있는 서비스 단위로 모듈화하는 아키텍처
{% endhint %}

### MSA 설계에 필요한 것들

### 문화&#x20;



## 장단점

### 장점

1. 간 서비스간 **독립성이 크다**. 즉, 느슨한 결합 때문에 다른 마이크로서비스 간의 간섭이 최소화 된다.&#x20;
2. 데이터베이스 확장에 유리하다.&#x20;

RDB는 기본적으로 스케일 아웃이 어렵다. 물론 샤딩이나 Replica를 통해 분산처리할 수 있지만 한계가 있다. No-SQL은 스케일 아웃에 비교적 더 유리하지만, 여러 노드에 저장된 데이터들을 다시 배치해야하는 리밸런싱이 필요하기 때문에 한계가 분명 존재하다.&#x20;

이 때 마이크로서비스는 독립된 데이터베이스를 갖고 있기 때문에 대용량 데이터베이스를 서비스 마다 분리하여 운영할 수 있다. 적은 범위의 독립된 데이터베이스에 샤딩이나 Replica를 적용하는 하는 것은 모놀로식의 하나의 큰 데이터베이스 보다 훨씬 적은 노력으로 성능을 얻을 수 있을 것이다.

3. 장애에 견고하다&#x20;

각 서비스가  독립되어 있으니 한 서비스가 장애가 나더라도 그 피해가 최소화 된다. 하지만 모놀로식이라면 하나의 장애가 전체의 장애로 퍼질 가능성이 훨씬 크다.&#x20;

4. 배포 주기가 빠르다&#x20;

각 서비스마다 환경이 분리되어 있기 때문에 독립적으로 배포가 가능하다. 물론 CI/CD가 잘 구축되어야 한다.&#x20;



4.

### 단점







MSA에서 서비스들은 느슨하게 결합되어 독립성을 갖도록 설계해야한다.





### 참고



스프링 부트로 개발하는 MSA 컴퍼넌트

도메인 주도 설계로 시작하는 마이크로서비스 개발&#x20;
