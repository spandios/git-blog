# 애그리거트와 트랜잭션

둘 이상의 스레드가 동시에 어떤 데이터를 수정하는 작업은 각 트랜잭션 간의 상호간섭으로 인해 일관성이 깨지는 문제가 발생한다. DMBS는 이 문제를 해결하기 위해 한 스레드가 작업 중이라면, 다른 스레드가 접근하지 못하도록 잠그는 기능을 제공하며, 그 강도도 조절 할 수 있는 옵션도 제공한다. 동시에 들어온 트랜잭션을 순서대로 처리함으로써 일관성을 지키는 것이다.

이러한 작업이 까다로운 점은 만약 일관성을 지키기 위해 Lock을 많이 사용하면 동시성 즉, 여러 트랜잭션이 동시에 실행되는 환경이 되어 성능이 낮아지며, 그렇다고 Lock을 최소화하면 다시 일관성이 지켜지지 않아 원점으로 돌아오기 때문이다.&#x20;

이번 글은 비관적 잠금과 낙관적 잠금에 대해 알아보면서 각 방식이 어떤 방법으로 동시성 문제를 해결하는지 알아보고 장단점이 무엇인지 알아본다.

<figure><img src="../../../../.gitbook/assets/스크린샷 2023-02-13 오후 1.39.28.png" alt=""><figcaption><p>일관성과 동시성은 반비례 관계</p></figcaption></figure>

#### 참고&#x20;

[https://dataonair.or.kr/db-tech-reference/d-guide/sql/?mod=document\&uid=363](https://dataonair.or.kr/db-tech-reference/d-guide/sql/?mod=document\&uid=363)
